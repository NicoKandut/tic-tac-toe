(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{37:function(n,t,e){},44:function(n,t){function e(n){var t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id=44},45:function(n,t,e){},46:function(n,t,e){"use strict";e.r(t);var a,r=e(1),c=e(0),o=e.n(c),s=e(25),i=e.n(s),l=(e(37),e(3)),d=e(9),u=e(4),b=e(2),j=e(6);function p(n){return encodeURI(btoa("".concat(n.roomId,":").concat(n.playerId)))}function h(n){if(n===a.O)return a.X;if(n===a.X)return a.O;throw new Error("Cannot find inverse of ".concat(n))}!function(n){n.NONE="none",n.X="x",n.O="o"}(a||(a={}));var O=a,f=e(26),x=e.n(f),k={v:"5.5.8",fr:60,ip:0,op:52,w:24,h:24,nm:"night-toggle",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"l6",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:11,s:[100]},{t:18,s:[0]}]},r:{a:0,k:300},p:{a:0,k:[12,12,0]}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-6.004],[0,-10.941]],c:!1}},nm:"Path 1",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},w:{a:0,k:2},lc:2,lj:1,ml:4,bm:0,d:[{n:"d",nm:"dash",cl:"paintable",v:{a:0,k:10}},{n:"g",nm:"gap",v:{a:0,k:10}},{n:"o",nm:"offset",v:{a:1,k:[{i:{x:[.431],y:[1]},o:{x:[.45],y:[0]},t:0,s:[0]},{t:20,s:[-5]}]}}],cl:"paintable",nm:"Stroke 1",hd:!1},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Shape 1",bm:0,hd:!1}],ip:0,op:52,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"l5",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:11,s:[100]},{t:18,s:[0]}]},r:{a:0,k:240},p:{a:0,k:[12,12,0]}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-6.004],[0,-10.941]],c:!1}},nm:"Path 1",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},w:{a:0,k:2},lc:2,lj:1,ml:4,bm:0,d:[{n:"d",nm:"dash",cl:"paintable",v:{a:0,k:10}},{n:"g",nm:"gap",v:{a:0,k:10}},{n:"o",nm:"offset",v:{a:1,k:[{i:{x:[.431],y:[1]},o:{x:[.45],y:[0]},t:0,s:[0]},{t:20,s:[-5]}]}}],cl:"paintable",nm:"Stroke 1",hd:!1},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Shape 1",bm:0,hd:!1}],ip:0,op:52,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"l4",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:11,s:[100]},{t:18,s:[0]}]},r:{a:0,k:180},p:{a:0,k:[12,12,0]}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-6.004],[0,-10.941]],c:!1}},nm:"Path 1",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},w:{a:0,k:2},lc:2,lj:1,ml:4,bm:0,d:[{n:"d",nm:"dash",cl:"paintable",v:{a:0,k:10}},{n:"g",nm:"gap",v:{a:0,k:10}},{n:"o",nm:"offset",v:{a:1,k:[{i:{x:[.431],y:[1]},o:{x:[.45],y:[0]},t:0,s:[0]},{t:20,s:[-5]}]}}],cl:"paintable",nm:"Stroke 1",hd:!1},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Shape 1",bm:0,hd:!1}],ip:0,op:52,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"l3",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:11,s:[100]},{t:18,s:[0]}]},r:{a:0,k:120},p:{a:0,k:[12,12,0]}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-6.004],[0,-10.941]],c:!1}},nm:"Path 1",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},w:{a:0,k:2},lc:2,lj:1,ml:4,bm:0,d:[{n:"d",nm:"dash",cl:"paintable",v:{a:0,k:10}},{n:"g",nm:"gap",v:{a:0,k:10}},{n:"o",nm:"offset",v:{a:1,k:[{i:{x:[.431],y:[1]},o:{x:[.45],y:[0]},t:0,s:[0]},{t:20,s:[-5]}]}}],cl:"paintable",nm:"Stroke 1",hd:!1},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Shape 1",bm:0,hd:!1}],ip:0,op:52,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"l2",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:11,s:[100]},{t:18,s:[0]}]},r:{a:0,k:60},p:{a:0,k:[12,12,0]}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-6.004],[0,-10.941]],c:!1}},nm:"Path 1",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},w:{a:0,k:2},lc:2,lj:1,ml:4,bm:0,d:[{n:"d",nm:"dash",cl:"paintable",v:{a:0,k:10}},{n:"g",nm:"gap",v:{a:0,k:10}},{n:"o",nm:"offset",v:{a:1,k:[{i:{x:[.431],y:[1]},o:{x:[.45],y:[0]},t:0,s:[0]},{t:20,s:[-5]}]}}],nm:"Stroke 1",cl:"paintable",hd:!1},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Shape 1",bm:0,hd:!1}],ip:0,op:52,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"l1",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:11,s:[100]},{t:18,s:[0]}]},p:{a:0,k:[12,12,0]}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-6.004],[0,-10.941]],c:!1}},nm:"Path 1",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},w:{a:0,k:2},lc:2,lj:1,ml:4,bm:0,d:[{n:"d",nm:"dash",v:{a:0,k:10}},{n:"g",nm:"gap",v:{a:0,k:10}},{n:"o",nm:"offset",v:{a:1,k:[{i:{x:[.431],y:[1]},o:{x:[.45],y:[0]},t:0,s:[0]},{t:20,s:[-5]}]}}],nm:"Stroke 1",cl:"paintable",hd:!1},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Shape 1",bm:0,hd:!1}],ip:0,op:52,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"c",sr:1,ks:{p:{a:0,k:[12,12,0]},a:{a:0,k:[-1.237,-2.112,0]}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:"s",pt:{a:1,k:[{i:{x:0,y:1},o:{x:.333,y:0},t:25,s:[{i:[[3.55,0],[0,-3.55],[-3.55,0],[0,3.55]],o:[[-3.55,0],[0,3.55],[3.55,0],[0,-3.55]],v:[[9.94,-19.487],[3.513,-13.06],[9.94,-6.633],[16.367,-13.06]],c:!0}]},{t:52,s:[{i:[[3.55,0],[0,-3.55],[-3.55,0],[0,3.55]],o:[[-3.55,0],[0,3.55],[3.55,0],[0,-3.55]],v:[[3.065,-12.362],[-3.362,-5.935],[3.065,.492],[9.492,-5.935]],c:!0}]}]},o:{a:0,k:100},x:{a:0,k:0},nm:"Mask 1"}],shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:1,k:[{i:{x:[.667,.667],y:[1,1]},o:{x:[.396,.396],y:[0,0]},t:16,s:[6,6]},{t:41,s:[16,16]}]},p:{a:0,k:[0,0]},cl:"paintable",nm:"Ellipse Path 1",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},r:1,bm:0,nm:"Fill 1",cl:"paintable",hd:!1},{ty:"tr",p:{a:0,k:[-1.237,-2.112]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Ellipse 1",bm:0,hd:!1}],ip:0,op:52,st:0,bm:0}],markers:[]};function m(){var n=Object(l.a)(["\n  height: 50px;\n  width: 50px;\n\n  :hover {\n    .paintable {\n      fill: teal;\n      stroke: teal;\n    }\n  }\n\n  .paintable {\n    transition: fill 0.2s linear, stroke 0.2s linear;\n    fill: var(--text1);\n    stroke: var(--text1);\n  }\n"]);return m=function(){return n},n}var v=b.b.div(m());function y(){var n=Object(c.useRef)(null),t=Object(c.useState)(1),e=Object(j.a)(t,2),a=e[0],o=e[1],s=Object(c.useState)(),i=Object(j.a)(s,2),l=i[0],d=i[1];return Object(c.useEffect)((function(){var t=n.current;if(t){var e=document.getElementsByTagName("body")[0];return d(x.a.loadAnimation({container:t,renderer:"svg",loop:!1,autoplay:e.classList.contains("dark"),animationData:k})),function(){(null===t||void 0===t?void 0:t.firstChild)&&t.removeChild(t.firstChild)}}}),[]),Object(r.jsx)(v,{ref:n,onClick:function(){if(l){var n=document.getElementsByTagName("body")[0];n.classList.contains("dark")?n.classList.remove("dark"):n.classList.add("dark"),o(-a),l.setDirection(a),l.play()}}})}function g(){return new URLSearchParams(Object(u.g)().search).get("i")}function w(){return function(n){var t=atob(decodeURI(n||"")).split(":"),e=Object(j.a)(t,2);return{roomId:e[0],playerId:e[1]}}(g())}function N(){var n=Object(l.a)(["\n  flex-grow: 1;\n"]);return N=function(){return n},n}var S=b.b.main(N());function E(){var n=g(),t=Object(c.useState)(""),e=Object(j.a)(t,2),a=e[0],o=e[1];return Object(r.jsxs)(S,{children:[n&&Object(r.jsx)(u.a,{to:"/versus?i=".concat(n)}),Object(r.jsx)("h2",{children:"Play online against your friends: "}),Object(r.jsx)(d.b,{to:"/versus",children:"New Game"}),Object(r.jsx)("h2",{children:"Join a game: "}),Object(r.jsx)("input",{type:"text",value:a,onChange:function(n){return o(n.target.value)}}),Object(r.jsx)(d.b,{to:"/versus?i=".concat(a),children:"Join Game"}),Object(r.jsx)("h2",{children:"Play together on this pc: "}),Object(r.jsx)(d.b,{to:"/local",children:"New Game"})]})}function C(){var n=Object(l.a)(["\n  display: flex;\n  justify-content: space-between;\n\n  nav {\n    display: flex;\n    gap: 30px;\n\n    a {\n      color: var(--text2);\n      text-decoration: none;\n      min-width: fit-content;\n\n      :visited {\n        color: var(--text2);\n      }\n\n      :hover {\n        color: teal;\n      }\n    }\n  }\n\n  a {\n    color: var(--text1);\n    text-decoration: none;\n\n    :visited {\n      color: var(--text1);\n    }\n\n    :hover {\n      color: var(--text1);\n    }\n  }\n"]);return C=function(){return n},n}var R=b.b.header(C());function I(){return Object(r.jsxs)(R,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(d.b,{to:"/",children:Object(r.jsx)("h1",{children:"Tic Tac Toe React App"})}),Object(r.jsxs)("nav",{children:[Object(r.jsx)(d.b,{to:"/",children:"Home"}),Object(r.jsx)(d.b,{to:"/versus?i=".concat(p({roomId:btoa((new Date).getTime().toString().substr(6)).replace(/=+/,""),playerId:O.X})),children:"Online Versus"}),Object(r.jsx)(d.b,{to:"/local",children:"Local Versus"})]})]}),Object(r.jsx)(y,{})]})}var L=e(19);function T(){var n=Object(l.a)(["\n  display: flex;\n  gap: 5px;\n\n  :nth-of-type(odd) {\n    flex-direction: row;\n  }\n\n  :nth-of-type(even) {\n    flex-direction: row-reverse;\n  }\n"]);return T=function(){return n},n}function P(){var n=Object(l.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 5px;\n  color: var(--text2);\n\n  div {\n    transition: color 0.2s linear;\n    color: var(--text2);\n\n    :hover {\n      color: teal;\n    }\n  }\n\n  a {\n    color: var(--text2);\n    text-decoration: none;\n\n    :visited {\n      color: var(--text2);\n    }\n\n    :hover {\n      color: teal;\n    }\n  }\n"]);return P=function(){return n},n}var A=b.b.footer(P()),D=b.b.div(T());function X(){return Object(r.jsxs)(A,{children:[Object(r.jsxs)(D,{children:[Object(r.jsx)(L.c,{}),Object(r.jsx)("span",{children:"Nico Kandut"})]}),Object(r.jsxs)(D,{children:[Object(r.jsx)(L.a,{}),Object(r.jsx)("span",{children:"0.1.6"})]}),Object(r.jsxs)(D,{children:[Object(r.jsx)(L.b,{}),Object(r.jsx)("a",{href:"https://github.com/NicoKandut/tic-tac-toe",children:"Repository"})]})]})}var F,U={gap:"20px",padding:"5px",red:"tomato",blue:"cornflowerblue",yellow:"gold",semiRed:"rgba(255, 150, 131, 0.6)",semiBlue:"rgba(150, 187, 255, 0.6)",semiYellow:"rgba(255, 236, 131, 0.4)",lightBeige:" rgb(218, 192, 160)",darkBeige:"rgb(182, 160, 134)"};!function(n){n[n.VERSUS=0]="VERSUS",n[n.LOCAL=1]="LOCAL"}(F||(F={}));var B=F,V=e(11),W=e(30),M=e.n(W);var Y=e(13),J=e(31);function G(){var n=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n  gap: ",";\n"]);return G=function(){return n},n}var z=b.b.div(G(),U.gap);function H(n,t){return _(t.slice(3*n,3*(n+1)))}function K(n,t){return _(t.filter((function(t,e){return e%3===n})))}function _(n){return n.every((function(t){return t!==O.NONE&&t===n[0]}))?n[0]:null}function q(){var n=Object(l.a)(["\n  padding: 10%;\n  display: grid;\n  background-color: var(--tile1);\n  aspect-ratio: 1/1;\n\n  :nth-of-type(even) {\n    background-color: var(--tile2);\n  }\n"]);return q=function(){return n},n}var Q=b.b.div(q());function Z(){var n=Object(l.a)(["\n      * {\n        fill: transparent;\n      }\n\n      .shape * {\n        stroke: ",";\n      }\n\n      .shadow * {\n        stroke: var(--shadow);\n      }\n    "]);return Z=function(){return n},n}var $=b.b.svg((function(n){return Object(b.a)(Z(),n.type===O.X?U.red:U.blue)}));function nn(n){var t=n.type;return Object(r.jsx)($,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",type:t,children:t===O.X?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("g",{className:"shadow",children:[Object(r.jsx)("line",{x1:"2",y1:"2.5",x2:"10",y2:"10.5",strokeWidth:"2"}),Object(r.jsx)("line",{x1:"2",y1:"10.5",x2:"10",y2:"2.5",strokeWidth:"2"})]}),Object(r.jsxs)("g",{className:"shape",children:[Object(r.jsx)("line",{x1:"2",y1:"2",x2:"10",y2:"10",strokeWidth:"2"}),Object(r.jsx)("line",{x1:"2",y1:"10",x2:"10",y2:"2",strokeWidth:"2"})]})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("g",{className:"shadow",children:Object(r.jsx)("circle",{cx:"6",cy:"6.5",r:"4",strokeWidth:"2"})}),Object(r.jsx)("g",{className:"shape",children:Object(r.jsx)("circle",{cx:"6",cy:"6",r:"4",strokeWidth:"2"})})]})})}function tn(n){var t=n.mark,e=n.index,a=n.processTurn,o=Object(c.useCallback)((function(){t===O.NONE&&a(e,!0)}),[e,t,a]);return Object(r.jsx)(Q,{onClick:o,children:t!==O.NONE&&Object(r.jsx)(nn,{type:t})})}function en(){var n=Object(l.a)(["\n  font-size: 32px;\n  color: gold;\n  filter: drop-shadow(0 3px 0 gray);\n"]);return en=function(){return n},n}function an(){var n=Object(l.a)(["\n  max-width: 60%;\n"]);return an=function(){return n},n}function rn(){var n=Object(l.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: grid;\n    place-items: center;\n    ",";\n  "]);return rn=function(){return n},n}function cn(){var n=Object(l.a)(["\n  max-height: 100%;\n  max-width: 100%;\n  height: 100%;\n  aspect-ratio: 1/1;\n\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: repeat(3, 1fr);\n  border: 5px var(--shadow) solid;\n  border-radius: 5px;\n  background-color: var(--shadow);\n"]);return cn=function(){return n},n}function on(){var n=Object(l.a)(["\n  position: relative;\n  place-content: center;\n"]);return on=function(){return n},n}var sn=Object(b.b)(z)(on()),ln=b.b.div(cn()),dn=b.b.div((function(n){var t=n.winner;return Object(b.a)(rn(),t?{x:U.semiRed,o:U.semiBlue,none:U.semiYellow}[t]:"")})),un=Object(b.b)(nn)(an()),bn=b.b.span(en());function jn(n){var t=n.tiles,e=n.processTurn,a=n.winner;return Object(r.jsxs)(sn,{className:"wrapper",children:[Object(r.jsx)(ln,{className:"board",children:t.map((function(n,t){return Object(r.jsx)(tn,{mark:n,index:t,processTurn:e},t)}))}),a&&Object(r.jsx)(dn,{winner:a,children:a===O.NONE?Object(r.jsx)(bn,{children:"Draw"}):Object(r.jsx)(un,{type:a})})]})}function pn(){var n=Object(l.a)(["\n  width: 100%;\n  height: 100px;\n  display: grid;\n  place-items: center;\n  color: var(--text2);\n  font-size: 16px;\n"]);return pn=function(){return n},n}var hn=b.b.div(pn());function On(){var n=Object(l.a)(["\n  width: 100%;\n  display: flex;\n  gap: ",";\n  padding-bottom: ",";\n  overflow-x: hidden;\n  scroll-behavior: smooth;\n"]);return On=function(){return n},n}var fn=b.b.div(On(),U.gap,U.padding);function xn(){var n=Object(l.a)(["\n  width: 100px;\n  height: 100px;\n  display: flex;\n"]);return xn=function(){return n},n}var kn=function(){},mn=b.b.div(xn());function vn(n){var t=n.games,e=Object(c.useRef)(null);return Object(c.useEffect)((function(){e.current&&(e.current.scrollLeft=e.current.scrollWidth)}),[t]),Object(r.jsx)(fn,{ref:e,children:t.length>0?t.map((function(n,t){var e=Object(j.a)(n,2),a=e[0],c=e[1];return Object(r.jsx)(mn,{children:Object(r.jsx)(jn,{tiles:c,winner:a,processTurn:kn})},t)})):Object(r.jsx)(hn,{children:Object(r.jsx)("span",{children:"No matches played yet..."})})})}e(45);function yn(){var n=Object(l.a)(["\n  display: flex;\n  justify-content: center;\n  gap: 5px;\n"]);return yn=function(){return n},n}function gn(){var n=Object(l.a)(["\n  justify-content: space-between;\n"]);return gn=function(){return n},n}var wn=Object(b.b)(z)(gn()),Nn=Object(b.b)(z)(yn());function Sn(n){var t=n.type,e=n.playerId,a=n.connection,o=n.peerId,s=Object(c.useState)(new Array(9).fill(O.NONE)),i=Object(j.a)(s,2),l=i[0],d=i[1],u=Object(c.useState)(new Array),b=Object(j.a)(u,2),f=b[0],x=b[1],k=Object(c.useState)(null),m=Object(j.a)(k,2),v=m[0],y=m[1],g=Object(c.useState)(O.X),w=Object(j.a)(g,2),N=w[0],S=w[1],E=Object(c.useCallback)((function(n,e){var r=l;r.splice(n,1,N),d(r),S(h(N));var c=function(n){for(var t=0;t<3;t++){var e=H(t,n);if(e)return e;var a=K(t,n);if(a)return a}return _([n[0],n[4],n[8]])||_([n[2],n[4],n[6]])||(n.every((function(n){return n!==O.NONE}))?O.NONE:null)}(l);y(c),t===B.VERSUS&&e&&(null===a||void 0===a||a.send(n))}),[a,N,l,t]),C=Object(c.useCallback)((function(n,r){(a&&N===e||t===B.LOCAL)&&E(n,r)}),[a,N,e,E,t]),R=Object(c.useCallback)((function(){v&&(x([].concat(Object(J.a)(f),[[v,l.map((function(n){return n}))]])),d(new Array(9).fill(O.NONE)),y(null))}),[f,l,v]),I=Object(c.useCallback)((function(n,e){"reset"===n&&R(),t===B.VERSUS&&e&&(null===a||void 0===a||a.send(n))}),[a,R,t]),L=Object(c.useCallback)((function(){I("reset",!1)}),[I]),T=Object(c.useMemo)((function(){var n;return f.reduce((function(n,t){var e=Object(j.a)(t,1)[0];return n[e]=n[e]+1,n}),(n={},Object(Y.a)(n,O.X,0),Object(Y.a)(n,O.O,0),Object(Y.a)(n,O.NONE,0),n))}),[f]);Object(c.useEffect)((function(){var n=a,t=function(n){"number"===typeof n?E(n,!1):"string"===typeof n&&I(n,!0)};return null===n||void 0===n||n.on("data",t),function(){return null===n||void 0===n?void 0:n.off("data",t)}}),[a,I,E]);var P=Object(c.useCallback)((function(n){var t=document.createRange();t.selectNodeContents(n.target);var e=window.getSelection();e&&(e.removeAllRanges(),e.addRange(t))}),[]);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(vn,{games:f}),Object(r.jsx)(Nn,{children:t===B.LOCAL?Object(r.jsx)("span",{className:"connected",children:"Local"}):a?"ERROR"===a.status?Object(r.jsx)("span",{className:"error",children:"Error"}):"CLOSED"===a.status?Object(r.jsx)("span",{className:"closed",children:"Closed"}):Object(r.jsx)("span",{className:"connected",children:"Connected"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{className:"invite",children:"Invite link: "}),Object(r.jsx)("code",{onClick:P,children:"https://".concat(window.location.host+"/tic-tac-toe","?i=").concat(p({roomId:o,playerId:h(e)}))})]})}),Object(r.jsxs)(wn,{children:[Object(r.jsx)("div",{className:"turn",children:v?Object(r.jsx)("span",{className:v,children:v===O.NONE?"Draw":v===e?"You win":"You lose"}):Object(r.jsx)("span",{className:N,children:N===e?"Your turn":"Opponent's turn"})}),Object(r.jsxs)("div",{className:"score",children:[Object(r.jsx)("span",{className:"x",children:T[O.X]}),Object(r.jsx)("span",{children:"-"}),Object(r.jsx)("span",{className:"o",children:T[O.O]})]})]}),Object(r.jsx)(jn,{tiles:l,winner:v,processTurn:C}),v&&Object(r.jsx)("button",{className:"continue",onClick:L,children:"Again"})]})}function En(){var n=w(),t=n.roomId,e=n.playerId,a=void 0===e?O.X:e,o=function(n,t){var e=Object(c.useState)(null),a=Object(j.a)(e,2),r=a[0],o=a[1],s=Object(c.useState)(""),i=Object(j.a)(s,2),l=i[0],d=i[1];return Object(c.useEffect)((function(){var n=new M.a;return n.on("error",(function(n){console.error("ERROR:",n)})),n.on("open",(function(e){if(d(e),console.debug("Peer Id:",e),t){console.debug("Role: HOST");var a=n.connect(t);o(a),a.on("error",(function(){o(Object(V.a)(Object(V.a)({},a),{},{status:"ERROR"}))})),a.on("close",(function(){o(Object(V.a)(Object(V.a)({},a),{},{status:"CLOSED"}))})),console.debug("Connection established",a)}})),t||(console.debug("Role: CLIENT"),n.on("connection",(function(n){o(n),n.on("error",(function(){o(Object(V.a)(Object(V.a)({},n),{},{status:"ERROR"}))})),n.on("close",(function(){o(Object(V.a)(Object(V.a)({},n),{},{status:"CLOSED"}))})),console.debug("Connection established",n)}))),function(){n.destroy()}}),[n,t]),{connection:r,peerId:l}}(a,t),s=o.connection,i=o.peerId;return Object(r.jsx)(Sn,{type:B.VERSUS,playerId:a,connection:s,peerId:i})}function Cn(){return Object(r.jsx)(Sn,{type:B.LOCAL,playerId:O.X,connection:null,peerId:""})}function Rn(){var n=Object(l.a)(["\n  display: grid;\n  padding: ",";\n  gap: ",";\n  max-width: 1000px;\n  margin: auto;\n  min-height: 100vh;\n  max-height: 100vh;\n  grid-template-rows: repeat(4, auto) 1fr auto;\n"]);return Rn=function(){return n},n}var In=b.b.div(Rn(),U.gap,U.gap);var Ln=function(){return Object(r.jsx)(d.a,{basename:"/tic-tac-toe",children:Object(r.jsxs)(In,{children:[Object(r.jsx)(I,{}),Object(r.jsxs)(u.d,{children:[Object(r.jsx)(u.b,{path:"/local",children:Object(r.jsx)(Cn,{})}),Object(r.jsx)(u.b,{path:"/versus",children:Object(r.jsx)(En,{})}),Object(r.jsx)(u.b,{path:"/",children:Object(r.jsx)(E,{})})]}),Object(r.jsx)(X,{})]})})},Tn=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,47)).then((function(t){var e=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;e(n),a(n),r(n),c(n),o(n)}))};i.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(Ln,{})}),document.getElementById("root")),Tn()}},[[46,1,2]]]);
//# sourceMappingURL=main.e0f95c76.chunk.js.map