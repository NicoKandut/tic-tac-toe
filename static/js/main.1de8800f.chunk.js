(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{34:function(e,n,t){},41:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=41},42:function(e,n,t){},43:function(e,n,t){},44:function(e,n,t){},45:function(e,n,t){},46:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(0),o=t.n(r),s=t(23),a=t.n(s),i=(t(34),t(8)),l=t(13),j=t(2),u=t(9),d={gap:"20px",red:"tomato",blue:"cornflowerblue",yellow:"gold",semiRed:"rgba(255, 150, 131, 0.6)",semiBlue:"rgba(150, 187, 255, 0.6)",semiYellow:"rgba(255, 236, 131, 0.4)"};function O(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n  gap: ",";\n"]);return O=function(){return e},e}var b=u.a.div(O(),d.gap);function x(){return Object(c.jsxs)("header",{children:[Object(c.jsx)("h1",{children:"Tic Tac Toe React App"}),Object(c.jsx)("nav",{})]})}function f(){var e=Object(i.a)(["\n  display: flex;\n\n  :nth-of-type(odd) {\n    flex-direction: row;\n  }\n\n  :nth-of-type(even) {\n    flex-direction: row-reverse;\n  }\n"]);return f=function(){return e},e}function h(){var e=Object(i.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  margin-bottom: ",";\n"]);return h=function(){return e},e}var v=u.a.footer(h(),d.gap),N=u.a.div(f());function p(){return Object(c.jsxs)(v,{children:[Object(c.jsx)(N,{children:Object(c.jsx)("span",{children:"ABC"})}),Object(c.jsx)(N,{children:Object(c.jsx)("span",{children:"XYZ"})}),Object(c.jsxs)(N,{children:[Object(c.jsx)("span",{children:"Version"}),Object(c.jsx)("span",{children:"0.1.6"})]})]})}function m(){return new URLSearchParams(Object(j.g)().search)}function g(){console.log("WELCOME RENDERED");var e=m(),n=e.get("roomId"),t=e.get("playerId");return Object(c.jsxs)("main",{children:[n&&t&&Object(c.jsx)(j.a,{to:"/versus?roomId=".concat(n,"&playerId=").concat(t)}),Object(c.jsx)("span",{children:"Create a game: "}),Object(c.jsx)(l.b,{to:"/versus?roomId=".concat(btoa((new Date).getTime().toString()).replace(/=+/,""),"&playerId=x"),children:"New Game"})]})}var E,w=t(17),y=t(28),C=t(7);function T(e){if(e===E.O)return E.X;if(e===E.X)return E.O;throw new Error("Cannot find inverse of ".concat(e))}!function(e){e.NONE="none",e.X="x",e.O="o"}(E||(E={}));var k=E;function I(e,n){return S(n.slice(3*e,3*(e+1)))}function R(e,n){return S(n.filter((function(n,t){return t%3===e})))}function S(e){return e.every((function(n){return n!==k.NONE&&n===e[0]}))?e[0]:null}var A=t(27),D=t.n(A);function F(e,n){return"haleluni-ttt-"+e+n}t(42);function G(e){var n=e.type;return Object(c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",className:"mark ".concat(n),children:n===k.X?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("g",{className:"shadow",children:[Object(c.jsx)("line",{x1:"2",y1:"2.5",x2:"10",y2:"10.5",strokeWidth:"2"}),Object(c.jsx)("line",{x1:"2",y1:"10.5",x2:"10",y2:"2.5",strokeWidth:"2"})]}),Object(c.jsxs)("g",{className:"shape",children:[Object(c.jsx)("line",{x1:"2",y1:"2",x2:"10",y2:"10",strokeWidth:"2"}),Object(c.jsx)("line",{x1:"2",y1:"10",x2:"10",y2:"2",strokeWidth:"2"})]})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("g",{className:"shadow",children:Object(c.jsx)("circle",{cx:"6",cy:"6.5",r:"4",strokeWidth:"2"})}),Object(c.jsx)("g",{className:"shape",children:Object(c.jsx)("circle",{cx:"6",cy:"6",r:"4",strokeWidth:"2"})})]})})}t(43);function W(e){var n=e.mark,t=e.index,o=e.processTurn,s=Object(r.useCallback)((function(){n===k.NONE&&o(t,!1)}),[t,n,o]);return Object(c.jsx)("div",{className:"tile",onClick:s,children:n!==k.NONE&&Object(c.jsx)(G,{type:n})})}t(44);function X(e){var n=e.tiles,t=e.processTurn,r=e.winner;return Object(c.jsxs)("div",{className:"board-wrapper",children:[Object(c.jsx)("div",{className:"board",children:n.map((function(e,n){return Object(c.jsx)(W,{mark:e,index:n,processTurn:t},n)}))}),r&&Object(c.jsx)("div",{className:"endscreen ".concat(r),children:r===k.NONE?Object(c.jsx)("span",{className:"draw",children:"Draw"}):Object(c.jsx)(G,{type:r})})]})}t(45);function L(){var e=m(),n=e.get("roomId"),t=e.get("playerId"),o=Object(r.useState)(new Array(9).fill(k.NONE)),s=Object(C.a)(o,2),a=s[0],i=s[1],l=Object(r.useState)(new Array),j=Object(C.a)(l,2),u=j[0],d=j[1],O=Object(r.useState)(null),x=Object(C.a)(O,2),f=x[0],h=x[1],v=Object(r.useState)(k.X),N=Object(C.a)(v,2),p=N[0],g=N[1];console.log("RENDER Game");var E=function(e,n){var t=Object(r.useState)(null),c=Object(C.a)(t,2),o=c[0],s=c[1];return Object(r.useEffect)((function(){var t=new D.a(F(e,n));return console.log("EFFECT"),t.on("error",(function(e){console.log("ERROR:",e)})),n===k.O?t.on("open",(function(){var c=F(e,T(n));console.log("PEER OPEN"),console.log("CONNECTING TO:",c);var r=t.connect(c);console.log("SETTING CONNECTION o"),s(r)})):(t.on("connection",(function(e){console.log("SETTING CONNECTION x"),s(e)})),console.log("WAITING FOR CONNECTION...")),function(){t.destroy()}}),[n,e]),o}(n,t),A=Object(r.useCallback)((function(e,n){console.log("Processturn");var t=a;t.splice(e,1,p),i(t),g(T(p));var c=function(e){for(var n=0;n<3;n++){var t=I(n,e);if(t)return t;var c=R(n,e);if(c)return c}return S([e[0],e[4],e[8]])||S([e[2],e[4],e[6]])||(e.every((function(e){return e!==k.NONE}))?k.NONE:null)}(a);h(c),n||(console.log("SENDING:",e),null===E||void 0===E||E.send(e))}),[E,p,a]),G=Object(r.useCallback)((function(e,n){p===t&&A(e,n)}),[p,t,A]),W=Object(r.useCallback)((function(){f&&(d([].concat(Object(y.a)(u),[[f,a.map((function(e){return e}))]])),i(new Array(9).fill(k.NONE)),h(null))}),[u,a,f]),L=Object(r.useCallback)((function(e,n){"reset"===e&&W(),n||(console.log("SENDING:",e),null===E||void 0===E||E.send(e))}),[E,W]),P=Object(r.useCallback)((function(){L("reset",!1)}),[L]),B=Object(r.useMemo)((function(){var e;return u.reduce((function(e,n){var t=Object(C.a)(n,1)[0];return e[t]=e[t]+1,e}),(e={},Object(w.a)(e,k.X,0),Object(w.a)(e,k.O,0),Object(w.a)(e,k.NONE,0),e))}),[u]);Object(r.useEffect)((function(){var e=E;console.log("DATA HANDLER:",e);var n=function(e){console.log("DATA"),"number"===typeof e?A(e,!0):"string"===typeof e&&L(e,!0)};return null===e||void 0===e||e.on("data",n),function(){return null===e||void 0===e?void 0:e.off("data",n)}}),[E,L,A]);var M=Object(r.useCallback)((function(e){var n=document.createRange();n.selectNodeContents(e.target);var t=window.getSelection();t&&(t.removeAllRanges(),t.addRange(n))}),[]);return Object(c.jsxs)(b,{className:"game",children:[Object(c.jsx)("div",{className:"history",children:u.length>0?u.map((function(e,n){var t=Object(C.a)(e,2),r=t[0],o=t[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{}),Object(c.jsx)(X,{tiles:o,winner:r,processTurn:function(){}})]},n)})):Object(c.jsx)("div",{className:"no-matches",children:Object(c.jsx)("span",{children:"No matches played yet..."})})}),Object(c.jsx)("div",{children:E?Object(c.jsx)("span",{children:"Connected"}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{children:"Invite link: "}),Object(c.jsx)("code",{onClick:M,children:"".concat(window.location.host+"/tic-tac-toe","?roomId=").concat(n,"&playerId=").concat(T(t))})]})}),Object(c.jsxs)("div",{className:"score",children:[Object(c.jsx)("span",{className:"x",children:B[k.X]}),Object(c.jsx)("span",{children:"-"}),Object(c.jsx)("span",{className:"o",children:B[k.O]})]}),Object(c.jsxs)("main",{className:"board-container",children:[Object(c.jsx)(X,{tiles:a,winner:f,processTurn:G}),f&&Object(c.jsx)("button",{className:"continue",onClick:P,children:"Again"})]})]})}function P(){var e=Object(i.a)(["\n  > * {\n    width: 100%;\n    max-width: 1000px;\n  }\n"]);return P=function(){return e},e}var B=Object(u.a)(b)(P());var M=function(){return Object(c.jsxs)(B,{children:[Object(c.jsx)(x,{}),Object(c.jsx)(l.a,{basename:"/tic-tac-toe",children:Object(c.jsxs)(j.d,{children:[Object(c.jsx)(j.b,{path:"/versus",children:Object(c.jsx)(L,{})}),Object(c.jsx)(j.b,{path:"/",children:Object(c.jsx)(g,{})})]})}),Object(c.jsx)(p,{})]})},U=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,47)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,o=n.getLCP,s=n.getTTFB;t(e),c(e),r(e),o(e),s(e)}))};a.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(M,{})}),document.getElementById("root")),U()}},[[46,1,2]]]);
//# sourceMappingURL=main.1de8800f.chunk.js.map