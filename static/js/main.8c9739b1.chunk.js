(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{34:function(e,n,t){},41:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=41},42:function(e,n,t){},43:function(e,n,t){},44:function(e,n,t){},45:function(e,n,t){},46:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(0),o=t.n(r),a=t(23),s=t.n(a),i=(t(34),t(8)),l=t(12),j=t(2),u=t(9),O={gap:"20px",red:"tomato",blue:"cornflowerblue",yellow:"gold",semiRed:"rgba(255, 150, 131, 0.6)",semiBlue:"rgba(150, 187, 255, 0.6)",semiYellow:"rgba(255, 236, 131, 0.4)"};function d(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n  gap: ",";\n"]);return d=function(){return e},e}var b=u.a.div(d(),O.gap);function f(){return Object(c.jsxs)("header",{children:[Object(c.jsx)("h1",{children:"Tic Tac Toe React App"}),Object(c.jsx)("nav",{})]})}function x(){var e=Object(i.a)(["\n  display: flex;\n\n  :nth-of-type(odd) {\n    flex-direction: row;\n  }\n\n  :nth-of-type(even) {\n    flex-direction: row-reverse;\n  }\n"]);return x=function(){return e},e}function h(){var e=Object(i.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  margin-bottom: ",";\n"]);return h=function(){return e},e}var N=u.a.footer(h(),O.gap),v=u.a.div(x());function m(){return Object(c.jsxs)(N,{children:[Object(c.jsx)(v,{children:Object(c.jsx)("span",{children:"ABC"})}),Object(c.jsx)(v,{children:Object(c.jsx)("span",{children:"XYZ"})})]})}function p(){return Object(c.jsxs)("main",{children:[Object(c.jsx)("span",{children:"Create a game: "}),Object(c.jsx)(l.b,{to:"".concat("/tic-tac-toe","/").concat(btoa((new Date).getTime().toString()).replace(/=+/,""),"/x"),children:"New Game"})]})}var g,w=t(17),y=t(28),E=t(7);function C(e){if(e===g.O)return g.X;if(e===g.X)return g.O;throw new Error("Cannot find inverse of ".concat(e))}!function(e){e.NONE="none",e.X="x",e.O="o"}(g||(g={}));var T=g;function k(e,n){return A(n.slice(3*e,3*(e+1)))}function I(e,n){return A(n.filter((function(n,t){return t%3===e})))}function A(e){return e.every((function(n){return n!==T.NONE&&n===e[0]}))?e[0]:null}var R=t(27),S=t.n(R);function D(e,n){return"haleluni-ttt-"+e+n}t(42);function F(e){var n=e.type;return Object(c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",className:"mark ".concat(n),children:n===T.X?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("g",{className:"shadow",children:[Object(c.jsx)("line",{x1:"2",y1:"2.5",x2:"10",y2:"10.5",strokeWidth:"2"}),Object(c.jsx)("line",{x1:"2",y1:"10.5",x2:"10",y2:"2.5",strokeWidth:"2"})]}),Object(c.jsxs)("g",{className:"shape",children:[Object(c.jsx)("line",{x1:"2",y1:"2",x2:"10",y2:"10",strokeWidth:"2"}),Object(c.jsx)("line",{x1:"2",y1:"10",x2:"10",y2:"2",strokeWidth:"2"})]})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("g",{className:"shadow",children:Object(c.jsx)("circle",{cx:"6",cy:"6.5",r:"4",strokeWidth:"2"})}),Object(c.jsx)("g",{className:"shape",children:Object(c.jsx)("circle",{cx:"6",cy:"6",r:"4",strokeWidth:"2"})})]})})}t(43);function G(e){var n=e.mark,t=e.index,o=e.processTurn,a=Object(r.useCallback)((function(){n===T.NONE&&o(t,!1)}),[t,n,o]);return Object(c.jsx)("div",{className:"tile",onClick:a,children:n!==T.NONE&&Object(c.jsx)(F,{type:n})})}t(44);function X(e){var n=e.tiles,t=e.processTurn,r=e.winner;return Object(c.jsxs)("div",{className:"board-wrapper",children:[Object(c.jsx)("div",{className:"board",children:n.map((function(e,n){return Object(c.jsx)(G,{mark:e,index:n,processTurn:t},n)}))}),r&&Object(c.jsx)("div",{className:"endscreen ".concat(r),children:r===T.NONE?Object(c.jsx)("span",{className:"draw",children:"Draw"}):Object(c.jsx)(F,{type:r})})]})}t(45);function W(){var e=Object(j.f)(),n=e.roomId,t=e.playerId,o=Object(r.useState)(new Array(9).fill(T.NONE)),a=Object(E.a)(o,2),s=a[0],i=a[1],l=Object(r.useState)(new Array),u=Object(E.a)(l,2),O=u[0],d=u[1],f=Object(r.useState)(null),x=Object(E.a)(f,2),h=x[0],N=x[1],v=Object(r.useState)(T.X),m=Object(E.a)(v,2),p=m[0],g=m[1];console.log("RENDER Game");var R=function(e,n){var t=Object(r.useState)(null),c=Object(E.a)(t,2),o=c[0],a=c[1];return Object(r.useEffect)((function(){var t=new S.a(D(e,n));return console.log("EFFECT"),t.on("error",(function(e){console.log("ERROR:",e)})),n===T.O?t.on("open",(function(){var c=D(e,C(n));console.log("PEER OPEN"),console.log("CONNECTING TO:",c);var r=t.connect(c);console.log("SETTING CONNECTION o"),a(r)})):(t.on("connection",(function(e){console.log("SETTING CONNECTION x"),a(e)})),console.log("WAITING FOR CONNECTION...")),function(){t.destroy()}}),[n,e]),o}(n,t),F=Object(r.useCallback)((function(e,n){console.log("Processturn");var t=s;t.splice(e,1,p),i(t),g(C(p));var c=function(e){for(var n=0;n<3;n++){var t=k(n,e);if(t)return t;var c=I(n,e);if(c)return c}return A([e[0],e[4],e[8]])||A([e[2],e[4],e[6]])||(e.every((function(e){return e!==T.NONE}))?T.NONE:null)}(s);N(c),n||(console.log("SENDING:",e),null===R||void 0===R||R.send(e))}),[R,p,s]),G=Object(r.useCallback)((function(e,n){p===t&&F(e,n)}),[p,t,F]),W=Object(r.useCallback)((function(){h&&(d([].concat(Object(y.a)(O),[[h,s.map((function(e){return e}))]])),i(new Array(9).fill(T.NONE)),N(null))}),[O,s,h]),B=Object(r.useCallback)((function(e,n){"reset"===e&&W(),n||(console.log("SENDING:",e),null===R||void 0===R||R.send(e))}),[R,W]),P=Object(r.useCallback)((function(){B("reset",!1)}),[B]),L=Object(r.useMemo)((function(){var e;return O.reduce((function(e,n){var t=Object(E.a)(n,1)[0];return e[t]=e[t]+1,e}),(e={},Object(w.a)(e,T.X,0),Object(w.a)(e,T.O,0),Object(w.a)(e,T.NONE,0),e))}),[O]);Object(r.useEffect)((function(){var e=R;console.log("DATA HANDLER:",e);var n=function(e){console.log("DATA"),"number"===typeof e?F(e,!0):"string"===typeof e&&B(e,!0)};return null===e||void 0===e||e.on("data",n),function(){return null===e||void 0===e?void 0:e.off("data",n)}}),[R,B,F]);var M=Object(r.useCallback)((function(e){var n=document.createRange();n.selectNodeContents(e.target);var t=window.getSelection();t&&(t.removeAllRanges(),t.addRange(n))}),[]);return Object(c.jsxs)(b,{className:"game",children:[Object(c.jsx)("div",{className:"history",children:O.length>0?O.map((function(e,n){var t=Object(E.a)(e,2),r=t[0],o=t[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{}),Object(c.jsx)(X,{tiles:o,winner:r,processTurn:function(){}})]},n)})):Object(c.jsx)("div",{className:"no-matches",children:Object(c.jsx)("span",{children:"No matches played yet..."})})}),Object(c.jsx)("div",{children:R?Object(c.jsx)("span",{children:"Connected"}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{children:"Invite link: "}),Object(c.jsx)("code",{onClick:M,children:"".concat(window.location.host,"/tic-tac-toe/").concat(n,"/").concat(C(t))})]})}),Object(c.jsxs)("div",{className:"score",children:[Object(c.jsx)("span",{className:"x",children:L[T.X]}),Object(c.jsx)("span",{children:"-"}),Object(c.jsx)("span",{className:"o",children:L[T.O]})]}),Object(c.jsxs)("main",{className:"board-container",children:[Object(c.jsx)(X,{tiles:s,winner:h,processTurn:G}),h&&Object(c.jsx)("button",{className:"continue",onClick:P,children:"Again"})]})]})}function B(){var e=Object(i.a)(["\n  > * {\n    width: 100%;\n    max-width: 1000px;\n  }\n"]);return B=function(){return e},e}var P=Object(u.a)(b)(B());var L=function(){return Object(c.jsxs)(P,{children:[Object(c.jsx)(f,{}),Object(c.jsx)(l.a,{basename:"/tic-tac-toe",children:Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:"".concat("/tic-tac-toe","/:roomId/:playerId"),children:Object(c.jsx)(W,{})}),Object(c.jsx)(j.a,{path:"".concat("/tic-tac-toe","/"),children:Object(c.jsx)(p,{})})]})}),Object(c.jsx)(m,{})]})},M=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,47)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,o=n.getLCP,a=n.getTTFB;t(e),c(e),r(e),o(e),a(e)}))};s.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(L,{})}),document.getElementById("root")),M()}},[[46,1,2]]]);
//# sourceMappingURL=main.8c9739b1.chunk.js.map