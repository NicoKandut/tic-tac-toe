(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{35:function(e,n,t){},42:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=42},43:function(e,n,t){},44:function(e,n,t){},45:function(e,n,t){},46:function(e,n,t){},47:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(0),a=t.n(r),s=t(24),i=t.n(s),o=(t(35),t(8)),l=t(13),j=t(2),u=t(9),d={gap:"20px",red:"tomato",blue:"cornflowerblue",yellow:"gold",semiRed:"rgba(255, 150, 131, 0.6)",semiBlue:"rgba(150, 187, 255, 0.6)",semiYellow:"rgba(255, 236, 131, 0.4)"};function b(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n  gap: ",";\n"]);return b=function(){return e},e}var O=u.a.div(b(),d.gap);function f(){return Object(c.jsxs)("header",{children:[Object(c.jsx)("h1",{children:"Tic Tac Toe React App"}),Object(c.jsx)("nav",{})]})}var x=t(18);function h(){var e=Object(o.a)(["\n  display: flex;\n  gap: 5px;\n\n  :nth-of-type(odd) {\n    flex-direction: row;\n  }\n\n  :nth-of-type(even) {\n    flex-direction: row-reverse;\n  }\n"]);return h=function(){return e},e}function v(){var e=Object(o.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 5px;\n  margin-bottom: ",";\n  color: lightgray;\n\n  div {\n    transition: color 0.2s linear;\n    color: lightgray;\n\n    :hover {\n      color: teal;\n    }\n  }\n\n  a {\n    color: lightgray;\n    text-decoration: none;\n\n    :visited {\n      color: lightgray;\n    }\n\n    :hover {\n      color: teal;\n    }\n  }\n"]);return v=function(){return e},e}var p=u.a.footer(v(),d.gap),m=u.a.div(h());function g(){return Object(c.jsxs)(p,{children:[Object(c.jsxs)(m,{children:[Object(c.jsx)(x.c,{}),Object(c.jsx)("span",{children:"Nico Kandut"})]}),Object(c.jsxs)(m,{children:[Object(c.jsx)(x.a,{}),Object(c.jsx)("span",{children:"0.1.6"})]}),Object(c.jsxs)(m,{children:[Object(c.jsx)(x.b,{}),Object(c.jsx)("a",{href:"https://github.com/NicoKandut/tic-tac-toe",children:"Repository"})]})]})}var N,y=t(6);function w(e){return btoa("".concat(e.roomId,":").concat(e.playerId))}function k(e){if(e===N.O)return N.X;if(e===N.X)return N.O;throw new Error("Cannot find inverse of ".concat(e))}!function(e){e.NONE="none",e.X="x",e.O="o"}(N||(N={}));var E=N;function C(){return new URLSearchParams(Object(j.g)().search).get("i")}function I(){return function(e){var n=atob(e).split(":"),t=Object(y.a)(n,2);return{roomId:t[0],playerId:t[1]}}(C())}function T(){var e=C();return Object(c.jsxs)("main",{children:[e&&Object(c.jsx)(j.a,{to:"/versus?i=".concat(e)}),Object(c.jsx)("span",{children:"Create a game: "}),Object(c.jsx)(l.b,{to:"/versus?i=".concat(w({roomId:btoa((new Date).getTime().toString().substr(6)).replace(/=+/,""),playerId:E.X})),children:"New Game"})]})}var R=t(17),S=t(29);function F(e,n){return W(n.slice(3*e,3*(e+1)))}function X(e,n){return W(n.filter((function(n,t){return t%3===e})))}function W(e){return e.every((function(n){return n!==E.NONE&&n===e[0]}))?e[0]:null}var A=t(28),D=t.n(A);function L(e,n){return"haleluni-ttt-"+e+n}t(43);function B(e){var n=e.type;return Object(c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",className:"mark ".concat(n),children:n===E.X?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("g",{className:"shadow",children:[Object(c.jsx)("line",{x1:"2",y1:"2.5",x2:"10",y2:"10.5",strokeWidth:"2"}),Object(c.jsx)("line",{x1:"2",y1:"10.5",x2:"10",y2:"2.5",strokeWidth:"2"})]}),Object(c.jsxs)("g",{className:"shape",children:[Object(c.jsx)("line",{x1:"2",y1:"2",x2:"10",y2:"10",strokeWidth:"2"}),Object(c.jsx)("line",{x1:"2",y1:"10",x2:"10",y2:"2",strokeWidth:"2"})]})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("g",{className:"shadow",children:Object(c.jsx)("circle",{cx:"6",cy:"6.5",r:"4",strokeWidth:"2"})}),Object(c.jsx)("g",{className:"shape",children:Object(c.jsx)("circle",{cx:"6",cy:"6",r:"4",strokeWidth:"2"})})]})})}t(44);function Y(e){var n=e.mark,t=e.index,a=e.processTurn,s=Object(r.useCallback)((function(){n===E.NONE&&a(t,!1)}),[t,n,a]);return Object(c.jsx)("div",{className:"tile",onClick:s,children:n!==E.NONE&&Object(c.jsx)(B,{type:n})})}t(45);function M(e){var n=e.tiles,t=e.processTurn,r=e.winner;return Object(c.jsxs)("div",{className:"board-wrapper",children:[Object(c.jsx)("div",{className:"board",children:n.map((function(e,n){return Object(c.jsx)(Y,{mark:e,index:n,processTurn:t},n)}))}),r&&Object(c.jsx)("div",{className:"endscreen ".concat(r),children:r===E.NONE?Object(c.jsx)("span",{className:"draw",children:"Draw"}):Object(c.jsx)(B,{type:r})})]})}function P(e){var n=e.games,t=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e;t&&t.current&&(t.current.scrollLeft=null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.scrollWidth)}),[n]),Object(c.jsx)("div",{className:"history",ref:t,children:n.length>0?n.map((function(e,n){var t=Object(y.a)(e,2),r=t[0],a=t[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{}),Object(c.jsx)(M,{tiles:a,winner:r,processTurn:function(){}})]},n)})):Object(c.jsx)("div",{className:"no-matches",children:Object(c.jsx)("span",{children:"No matches played yet..."})})})}t(46);function U(){var e=Object(o.a)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n  gap: ",";\n"]);return U=function(){return e},e}var J=u.a.div(U(),d.gap);function K(){var e=Object(o.a)(["\n  justify-content: space-between;\n"]);return K=function(){return e},e}var _=Object(u.a)(J)(K());function G(){var e=I(),n=e.roomId,t=e.playerId,a=Object(r.useState)(new Array(9).fill(E.NONE)),s=Object(y.a)(a,2),i=s[0],o=s[1],l=Object(r.useState)(new Array),j=Object(y.a)(l,2),u=j[0],d=j[1],b=Object(r.useState)(null),f=Object(y.a)(b,2),x=f[0],h=f[1],v=Object(r.useState)(E.X),p=Object(y.a)(v,2),m=p[0],g=p[1],N=function(e,n){var t=Object(r.useState)(null),c=Object(y.a)(t,2),a=c[0],s=c[1];return Object(r.useEffect)((function(){var t=new D.a(L(e,n));return t.on("error",(function(e){console.error("ERROR:",e)})),n===E.O?t.on("open",(function(){var c=L(e,k(n)),r=t.connect(c);s(r)})):t.on("connection",(function(e){s(e)})),function(){t.destroy()}}),[n,e]),a}(n,t),C=Object(r.useCallback)((function(e,n){var t=i;t.splice(e,1,m),o(t),g(k(m));var c=function(e){for(var n=0;n<3;n++){var t=F(n,e);if(t)return t;var c=X(n,e);if(c)return c}return W([e[0],e[4],e[8]])||W([e[2],e[4],e[6]])||(e.every((function(e){return e!==E.NONE}))?E.NONE:null)}(i);h(c),n||null===N||void 0===N||N.send(e)}),[N,m,i]),T=Object(r.useCallback)((function(e,n){m===t&&C(e,n)}),[m,t,C]),A=Object(r.useCallback)((function(){x&&(d([].concat(Object(S.a)(u),[[x,i.map((function(e){return e}))]])),o(new Array(9).fill(E.NONE)),h(null))}),[u,i,x]),B=Object(r.useCallback)((function(e,n){"reset"===e&&A(),n||null===N||void 0===N||N.send(e)}),[N,A]),Y=Object(r.useCallback)((function(){B("reset",!1)}),[B]),U=Object(r.useMemo)((function(){var e;return u.reduce((function(e,n){var t=Object(y.a)(n,1)[0];return e[t]=e[t]+1,e}),(e={},Object(R.a)(e,E.X,0),Object(R.a)(e,E.O,0),Object(R.a)(e,E.NONE,0),e))}),[u]);Object(r.useEffect)((function(){var e=N,n=function(e){"number"===typeof e?C(e,!0):"string"===typeof e&&B(e,!0)};return null===e||void 0===e||e.on("data",n),function(){return null===e||void 0===e?void 0:e.off("data",n)}}),[N,B,C]);var J=Object(r.useCallback)((function(e){var n=document.createRange();n.selectNodeContents(e.target);var t=window.getSelection();t&&(t.removeAllRanges(),t.addRange(n))}),[]);return Object(c.jsxs)(O,{className:"game",children:[Object(c.jsx)(P,{games:u}),Object(c.jsx)("div",{children:N?Object(c.jsx)("span",{className:"connected",children:"Connected"}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"invite",children:"Invite link: "}),Object(c.jsx)("code",{onClick:J,children:"".concat(window.location.host+"/tic-tac-toe","?i=").concat(w({roomId:n,playerId:k(t)}))})]})}),Object(c.jsxs)("main",{className:"board-container",children:[Object(c.jsxs)(_,{children:[Object(c.jsx)("div",{className:"turn",children:x?Object(c.jsx)("span",{className:x,children:x===E.NONE?"Draw":x===t?"You win":"You lose"}):Object(c.jsx)("span",{className:m,children:m===t?"Your turn":"Opponent's turn"})}),Object(c.jsxs)("div",{className:"score",children:[Object(c.jsx)("span",{className:"x",children:U[E.X]}),Object(c.jsx)("span",{children:"-"}),Object(c.jsx)("span",{className:"o",children:U[E.O]})]})]}),Object(c.jsx)(M,{tiles:i,winner:x,processTurn:T}),x&&Object(c.jsx)("button",{className:"continue",onClick:Y,children:"Again"})]})]})}function q(){var e=Object(o.a)(["\n  > * {\n    width: 100%;\n    max-width: 1000px;\n    padding: ",";\n  }\n"]);return q=function(){return e},e}var z=Object(u.a)(O)(q(),d.gap);var H=function(){return Object(c.jsxs)(z,{children:[Object(c.jsx)(f,{}),Object(c.jsx)(l.a,{basename:"/tic-tac-toe",children:Object(c.jsxs)(j.d,{children:[Object(c.jsx)(j.b,{path:"/versus",children:Object(c.jsx)(G,{})}),Object(c.jsx)(j.b,{path:"/",children:Object(c.jsx)(T,{})})]})}),Object(c.jsx)(g,{})]})},Q=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,48)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,a=n.getLCP,s=n.getTTFB;t(e),c(e),r(e),a(e),s(e)}))};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(H,{})}),document.getElementById("root")),Q()}},[[47,1,2]]]);
//# sourceMappingURL=main.5612aff4.chunk.js.map