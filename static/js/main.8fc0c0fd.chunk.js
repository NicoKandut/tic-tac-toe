(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{37:function(n,e,t){},44:function(n,e){function t(n){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=44},45:function(n,e,t){},46:function(n,e,t){"use strict";t.r(e);var a=t(1),r=t(0),c=t.n(r),o=t(25),s=t.n(o),i=(t(37),t(3)),l=t(9),d=t(4),u=t(2),b={gap:"20px",padding:"5px",red:"tomato",blue:"cornflowerblue",yellow:"gold",semiRed:"rgba(255, 150, 131, 0.6)",semiBlue:"rgba(150, 187, 255, 0.6)",semiYellow:"rgba(255, 236, 131, 0.4)",lightBeige:" rgb(218, 192, 160)",darkBeige:"rgb(182, 160, 134)"};function j(){var n=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n  gap: ",";\n"]);return j=function(){return n},n}var p,h=u.b.div(j(),b.gap),O=t(6);function f(n){return encodeURI(btoa("".concat(n.roomId,":").concat(n.playerId)))}function k(n){if(n===p.O)return p.X;if(n===p.X)return p.O;throw new Error("Cannot find inverse of ".concat(n))}!function(n){n.NONE="none",n.X="x",n.O="o"}(p||(p={}));var x=p,m=t(29),v=t.n(m),y={v:"5.5.8",fr:60,ip:0,op:52,w:24,h:24,nm:"night-toggle",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"l6",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:11,s:[100]},{t:18,s:[0]}]},r:{a:0,k:300},p:{a:0,k:[12,12,0]}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-6.004],[0,-10.941]],c:!1}},nm:"Path 1",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},w:{a:0,k:2},lc:2,lj:1,ml:4,bm:0,d:[{n:"d",nm:"dash",cl:"paintable",v:{a:0,k:10}},{n:"g",nm:"gap",v:{a:0,k:10}},{n:"o",nm:"offset",v:{a:1,k:[{i:{x:[.431],y:[1]},o:{x:[.45],y:[0]},t:0,s:[0]},{t:20,s:[-5]}]}}],cl:"paintable",nm:"Stroke 1",hd:!1},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Shape 1",bm:0,hd:!1}],ip:0,op:52,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"l5",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:11,s:[100]},{t:18,s:[0]}]},r:{a:0,k:240},p:{a:0,k:[12,12,0]}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-6.004],[0,-10.941]],c:!1}},nm:"Path 1",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},w:{a:0,k:2},lc:2,lj:1,ml:4,bm:0,d:[{n:"d",nm:"dash",cl:"paintable",v:{a:0,k:10}},{n:"g",nm:"gap",v:{a:0,k:10}},{n:"o",nm:"offset",v:{a:1,k:[{i:{x:[.431],y:[1]},o:{x:[.45],y:[0]},t:0,s:[0]},{t:20,s:[-5]}]}}],cl:"paintable",nm:"Stroke 1",hd:!1},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Shape 1",bm:0,hd:!1}],ip:0,op:52,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"l4",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:11,s:[100]},{t:18,s:[0]}]},r:{a:0,k:180},p:{a:0,k:[12,12,0]}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-6.004],[0,-10.941]],c:!1}},nm:"Path 1",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},w:{a:0,k:2},lc:2,lj:1,ml:4,bm:0,d:[{n:"d",nm:"dash",cl:"paintable",v:{a:0,k:10}},{n:"g",nm:"gap",v:{a:0,k:10}},{n:"o",nm:"offset",v:{a:1,k:[{i:{x:[.431],y:[1]},o:{x:[.45],y:[0]},t:0,s:[0]},{t:20,s:[-5]}]}}],cl:"paintable",nm:"Stroke 1",hd:!1},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Shape 1",bm:0,hd:!1}],ip:0,op:52,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"l3",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:11,s:[100]},{t:18,s:[0]}]},r:{a:0,k:120},p:{a:0,k:[12,12,0]}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-6.004],[0,-10.941]],c:!1}},nm:"Path 1",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},w:{a:0,k:2},lc:2,lj:1,ml:4,bm:0,d:[{n:"d",nm:"dash",cl:"paintable",v:{a:0,k:10}},{n:"g",nm:"gap",v:{a:0,k:10}},{n:"o",nm:"offset",v:{a:1,k:[{i:{x:[.431],y:[1]},o:{x:[.45],y:[0]},t:0,s:[0]},{t:20,s:[-5]}]}}],cl:"paintable",nm:"Stroke 1",hd:!1},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Shape 1",bm:0,hd:!1}],ip:0,op:52,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"l2",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:11,s:[100]},{t:18,s:[0]}]},r:{a:0,k:60},p:{a:0,k:[12,12,0]}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-6.004],[0,-10.941]],c:!1}},nm:"Path 1",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},w:{a:0,k:2},lc:2,lj:1,ml:4,bm:0,d:[{n:"d",nm:"dash",cl:"paintable",v:{a:0,k:10}},{n:"g",nm:"gap",v:{a:0,k:10}},{n:"o",nm:"offset",v:{a:1,k:[{i:{x:[.431],y:[1]},o:{x:[.45],y:[0]},t:0,s:[0]},{t:20,s:[-5]}]}}],nm:"Stroke 1",cl:"paintable",hd:!1},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Shape 1",bm:0,hd:!1}],ip:0,op:52,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"l1",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:11,s:[100]},{t:18,s:[0]}]},p:{a:0,k:[12,12,0]}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-6.004],[0,-10.941]],c:!1}},nm:"Path 1",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},w:{a:0,k:2},lc:2,lj:1,ml:4,bm:0,d:[{n:"d",nm:"dash",v:{a:0,k:10}},{n:"g",nm:"gap",v:{a:0,k:10}},{n:"o",nm:"offset",v:{a:1,k:[{i:{x:[.431],y:[1]},o:{x:[.45],y:[0]},t:0,s:[0]},{t:20,s:[-5]}]}}],nm:"Stroke 1",cl:"paintable",hd:!1},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Shape 1",bm:0,hd:!1}],ip:0,op:52,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"c",sr:1,ks:{p:{a:0,k:[12,12,0]},a:{a:0,k:[-1.237,-2.112,0]}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:"s",pt:{a:1,k:[{i:{x:0,y:1},o:{x:.333,y:0},t:25,s:[{i:[[3.55,0],[0,-3.55],[-3.55,0],[0,3.55]],o:[[-3.55,0],[0,3.55],[3.55,0],[0,-3.55]],v:[[9.94,-19.487],[3.513,-13.06],[9.94,-6.633],[16.367,-13.06]],c:!0}]},{t:52,s:[{i:[[3.55,0],[0,-3.55],[-3.55,0],[0,3.55]],o:[[-3.55,0],[0,3.55],[3.55,0],[0,-3.55]],v:[[3.065,-12.362],[-3.362,-5.935],[3.065,.492],[9.492,-5.935]],c:!0}]}]},o:{a:0,k:100},x:{a:0,k:0},nm:"Mask 1"}],shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:1,k:[{i:{x:[.667,.667],y:[1,1]},o:{x:[.396,.396],y:[0,0]},t:16,s:[6,6]},{t:41,s:[16,16]}]},p:{a:0,k:[0,0]},cl:"paintable",nm:"Ellipse Path 1",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},r:1,bm:0,nm:"Fill 1",cl:"paintable",hd:!1},{ty:"tr",p:{a:0,k:[-1.237,-2.112]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Ellipse 1",bm:0,hd:!1}],ip:0,op:52,st:0,bm:0}],markers:[]};function g(){var n=Object(i.a)(["\n  height: 50px;\n  width: 50px;\n\n  :hover {\n    .paintable {\n      fill: teal;\n      stroke: teal;\n    }\n  }\n\n  .paintable {\n    transition: fill 0.2s linear, stroke 0.2s linear;\n    fill: var(--text1);\n    stroke: var(--text1);\n  }\n"]);return g=function(){return n},n}var w=u.b.div(g());function N(){var n=Object(r.useRef)(null),e=Object(r.useState)(1),t=Object(O.a)(e,2),c=t[0],o=t[1],s=Object(r.useState)(),i=Object(O.a)(s,2),l=i[0],d=i[1];return Object(r.useEffect)((function(){var e=n.current;if(e){var t=document.getElementsByTagName("body")[0];return d(v.a.loadAnimation({container:e,renderer:"svg",loop:!1,autoplay:t.classList.contains("dark"),animationData:y})),function(){(null===e||void 0===e?void 0:e.firstChild)&&e.removeChild(e.firstChild)}}}),[]),Object(a.jsx)(w,{ref:n,onClick:function(){if(l){var n=document.getElementsByTagName("body")[0];n.classList.contains("dark")?n.classList.remove("dark"):n.classList.add("dark"),o(-c),l.setDirection(c),l.play()}}})}function S(){return new URLSearchParams(Object(d.g)().search).get("i")}function E(){return function(n){var e=atob(decodeURI(n||"")).split(":"),t=Object(O.a)(e,2);return{roomId:t[0],playerId:t[1]}}(S())}function C(){var n=Object(i.a)(["\n  flex-grow: 1;\n"]);return C=function(){return n},n}var R=u.b.main(C());function I(){var n=S(),e=Object(r.useState)(""),t=Object(O.a)(e,2),c=t[0],o=t[1];return Object(a.jsxs)(R,{children:[n&&Object(a.jsx)(d.a,{to:"/versus?i=".concat(n)}),Object(a.jsx)("h2",{children:"Play online against your friends: "}),Object(a.jsx)(l.b,{to:"/versus",children:"New Game"}),Object(a.jsx)("h2",{children:"Join a game: "}),Object(a.jsx)("input",{type:"text",value:c,onChange:function(n){return o(n.target.value)}}),Object(a.jsx)(l.b,{to:"/versus?i=".concat(c),children:"Join Game"}),Object(a.jsx)("h2",{children:"Play together on this pc: "}),Object(a.jsx)(l.b,{to:"/local",children:"New Game"})]})}function T(){var n=Object(i.a)(["\n  display: flex;\n  justify-content: space-between;\n\n  nav {\n    display: flex;\n    gap: 30px;\n\n    a {\n      color: var(--text2);\n      text-decoration: none;\n\n      :visited {\n        color: var(--text2);\n      }\n\n      :hover {\n        color: teal;\n      }\n    }\n  }\n\n  a {\n    color: var(--text1);\n    text-decoration: none;\n\n    :visited {\n      color: var(--text1);\n    }\n\n    :hover {\n      color: var(--text1);\n    }\n  }\n"]);return T=function(){return n},n}var L=u.b.header(T());function P(){return Object(a.jsxs)(L,{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(l.b,{to:"/",children:Object(a.jsx)("h1",{children:"Tic Tac Toe React App"})}),Object(a.jsxs)("nav",{children:[Object(a.jsx)(l.b,{to:"/",children:"Home"}),Object(a.jsx)(l.b,{to:"/versus?i=".concat(f({roomId:btoa((new Date).getTime().toString().substr(6)).replace(/=+/,""),playerId:x.X})),children:"Online Versus"}),Object(a.jsx)(l.b,{to:"/local",children:"Local Versus"})]})]}),Object(a.jsx)(N,{})]})}var A=t(19);function D(){var n=Object(i.a)(["\n  display: flex;\n  gap: 5px;\n\n  :nth-of-type(odd) {\n    flex-direction: row;\n  }\n\n  :nth-of-type(even) {\n    flex-direction: row-reverse;\n  }\n"]);return D=function(){return n},n}function X(){var n=Object(i.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 5px;\n  margin-bottom: ",";\n  color: var(--text2);\n\n  div {\n    transition: color 0.2s linear;\n    color: var(--text2);\n\n    :hover {\n      color: teal;\n    }\n  }\n\n  a {\n    color: var(--text2);\n    text-decoration: none;\n\n    :visited {\n      color: var(--text2);\n    }\n\n    :hover {\n      color: teal;\n    }\n  }\n"]);return X=function(){return n},n}var U,B=u.b.footer(X(),b.gap),F=u.b.div(D());function V(){return Object(a.jsxs)(B,{children:[Object(a.jsxs)(F,{children:[Object(a.jsx)(A.c,{}),Object(a.jsx)("span",{children:"Nico Kandut"})]}),Object(a.jsxs)(F,{children:[Object(a.jsx)(A.a,{}),Object(a.jsx)("span",{children:"0.1.6"})]}),Object(a.jsxs)(F,{children:[Object(a.jsx)(A.b,{}),Object(a.jsx)("a",{href:"https://github.com/NicoKandut/tic-tac-toe",children:"Repository"})]})]})}!function(n){n[n.VERSUS=0]="VERSUS",n[n.LOCAL=1]="LOCAL"}(U||(U={}));var W=U,M=t(11),Y=t(30),J=t.n(Y);var G=t(13),z=t(31);function H(){var n=Object(i.a)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n  gap: ",";\n"]);return H=function(){return n},n}var K=u.b.div(H(),b.gap);function _(n,e){return Q(e.slice(3*n,3*(n+1)))}function q(n,e){return Q(e.filter((function(e,t){return t%3===n})))}function Q(n){return n.every((function(e){return e!==x.NONE&&e===n[0]}))?n[0]:null}function Z(){var n=Object(i.a)(["\n  padding: 10%;\n  display: grid;\n  background-color: var(--tile1);\n\n  :nth-of-type(even) {\n    background-color: var(--tile2);\n  }\n"]);return Z=function(){return n},n}var $=u.b.div(Z());function nn(){var n=Object(i.a)(["\n      * {\n        fill: transparent;\n      }\n\n      .shape * {\n        stroke: ",";\n      }\n\n      .shadow * {\n        stroke: var(--shadow);\n      }\n    "]);return nn=function(){return n},n}var en=u.b.svg((function(n){return Object(u.a)(nn(),n.type===x.X?b.red:b.blue)}));function tn(n){var e=n.type;return Object(a.jsx)(en,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",type:e,children:e===x.X?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("g",{className:"shadow",children:[Object(a.jsx)("line",{x1:"2",y1:"2.5",x2:"10",y2:"10.5",strokeWidth:"2"}),Object(a.jsx)("line",{x1:"2",y1:"10.5",x2:"10",y2:"2.5",strokeWidth:"2"})]}),Object(a.jsxs)("g",{className:"shape",children:[Object(a.jsx)("line",{x1:"2",y1:"2",x2:"10",y2:"10",strokeWidth:"2"}),Object(a.jsx)("line",{x1:"2",y1:"10",x2:"10",y2:"2",strokeWidth:"2"})]})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("g",{className:"shadow",children:Object(a.jsx)("circle",{cx:"6",cy:"6.5",r:"4",strokeWidth:"2"})}),Object(a.jsx)("g",{className:"shape",children:Object(a.jsx)("circle",{cx:"6",cy:"6",r:"4",strokeWidth:"2"})})]})})}function an(n){var e=n.mark,t=n.index,c=n.processTurn,o=Object(r.useCallback)((function(){e===x.NONE&&c(t,!0)}),[t,e,c]);return Object(a.jsx)($,{onClick:o,children:e!==x.NONE&&Object(a.jsx)(tn,{type:e})})}function rn(){var n=Object(i.a)(["\n  font-size: 32px;\n  color: gold;\n  filter: drop-shadow(0 3px 0 gray);\n"]);return rn=function(){return n},n}function cn(){var n=Object(i.a)(["\n  max-width: 60%;\n"]);return cn=function(){return n},n}function on(){var n=Object(i.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: grid;\n    place-items: center;\n    ",";\n  "]);return on=function(){return n},n}function sn(){var n=Object(i.a)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: repeat(3, 1fr);\n  border: 5px var(--shadow) solid;\n  border-radius: 5px;\n  background-color: var(--shadow);\n"]);return sn=function(){return n},n}function ln(){var n=Object(i.a)(["\n  position: relative;\n"]);return ln=function(){return n},n}var dn=u.b.div(ln()),un=u.b.div(sn()),bn=u.b.div((function(n){var e=n.winner;return Object(u.a)(on(),e?{x:b.semiRed,o:b.semiBlue,none:b.semiYellow}[e]:"")})),jn=Object(u.b)(tn)(cn()),pn=u.b.span(rn());function hn(n){var e=n.tiles,t=n.processTurn,r=n.winner;return Object(a.jsxs)(dn,{children:[Object(a.jsx)(un,{className:"board",children:e.map((function(n,e){return Object(a.jsx)(an,{mark:n,index:e,processTurn:t},e)}))}),r&&Object(a.jsx)(bn,{winner:r,children:r===x.NONE?Object(a.jsx)(pn,{children:"Draw"}):Object(a.jsx)(jn,{type:r})})]})}function On(){var n=Object(i.a)(["\n  width: 100%;\n  height: 100px;\n  display: grid;\n  place-items: center;\n  color: var(--text2);\n  font-size: 32px;\n"]);return On=function(){return n},n}var fn=u.b.div(On());function kn(){var n=Object(i.a)(["\n  width: 100%;\n  display: flex;\n  gap: ",";\n  padding-bottom: ",";\n  overflow-x: hidden;\n  scroll-behavior: smooth;\n"]);return kn=function(){return n},n}var xn=u.b.div(kn(),b.gap,b.padding);function mn(){var n=Object(i.a)(["\n  width: 100px;\n  height: 100px;\n"]);return mn=function(){return n},n}var vn=Object(u.b)(hn)(mn());function yn(n){var e=n.games,t=Object(r.useRef)(null);return Object(r.useEffect)((function(){t.current&&(t.current.scrollLeft=t.current.scrollWidth)}),[e]),Object(a.jsx)(xn,{ref:t,children:e.length>0?e.map((function(n,e){var t=Object(O.a)(n,2),r=t[0],c=t[1];return Object(a.jsx)(vn,{tiles:c,winner:r,processTurn:function(){}},e)})):Object(a.jsx)(fn,{children:Object(a.jsx)("span",{children:"No matches played yet..."})})})}t(45);function gn(){var n=Object(i.a)(["\n  justify-content: space-between;\n"]);return gn=function(){return n},n}var wn=Object(u.b)(K)(gn());function Nn(n){var e=n.type,t=n.playerId,c=n.connection,o=n.peerId,s=Object(r.useState)(new Array(9).fill(x.NONE)),i=Object(O.a)(s,2),l=i[0],d=i[1],u=Object(r.useState)(new Array),b=Object(O.a)(u,2),j=b[0],p=b[1],m=Object(r.useState)(null),v=Object(O.a)(m,2),y=v[0],g=v[1],w=Object(r.useState)(x.X),N=Object(O.a)(w,2),S=N[0],E=N[1],C=Object(r.useCallback)((function(n,t){var a=l;a.splice(n,1,S),d(a),E(k(S));var r=function(n){for(var e=0;e<3;e++){var t=_(e,n);if(t)return t;var a=q(e,n);if(a)return a}return Q([n[0],n[4],n[8]])||Q([n[2],n[4],n[6]])||(n.every((function(n){return n!==x.NONE}))?x.NONE:null)}(l);g(r),e===W.VERSUS&&t&&(null===c||void 0===c||c.send(n))}),[c,S,l,e]),I=Object(r.useCallback)((function(n,a){(c&&S===t||e===W.LOCAL)&&C(n,a)}),[c,S,t,C,e]),T=Object(r.useCallback)((function(){y&&(p([].concat(Object(z.a)(j),[[y,l.map((function(n){return n}))]])),d(new Array(9).fill(x.NONE)),g(null))}),[j,l,y]),L=Object(r.useCallback)((function(n,t){"reset"===n&&T(),e===W.VERSUS&&t&&(null===c||void 0===c||c.send(n))}),[c,T,e]),P=Object(r.useCallback)((function(){L("reset",!1)}),[L]),A=Object(r.useMemo)((function(){var n;return j.reduce((function(n,e){var t=Object(O.a)(e,1)[0];return n[t]=n[t]+1,n}),(n={},Object(G.a)(n,x.X,0),Object(G.a)(n,x.O,0),Object(G.a)(n,x.NONE,0),n))}),[j]);Object(r.useEffect)((function(){var n=c,e=function(n){"number"===typeof n?C(n,!1):"string"===typeof n&&L(n,!0)};return null===n||void 0===n||n.on("data",e),function(){return null===n||void 0===n?void 0:n.off("data",e)}}),[c,L,C]);var D=Object(r.useCallback)((function(n){var e=document.createRange();e.selectNodeContents(n.target);var t=window.getSelection();t&&(t.removeAllRanges(),t.addRange(e))}),[]);return Object(a.jsxs)(h,{className:"game",children:[Object(a.jsx)(yn,{games:j}),Object(a.jsx)("div",{children:c?"ERROR"===c.status?Object(a.jsx)("span",{className:"error",children:"Error"}):"CLOSED"===c.status?Object(a.jsx)("span",{className:"closed",children:"Closed"}):Object(a.jsx)("span",{className:"connected",children:"Connected"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{className:"invite",children:"Invite link: "}),Object(a.jsx)("code",{onClick:D,children:"https://".concat(window.location.host+"/tic-tac-toe","?i=").concat(f({roomId:o,playerId:k(t)}))})]})}),Object(a.jsxs)(R,{className:"board-container",children:[Object(a.jsxs)(wn,{children:[Object(a.jsx)("div",{className:"turn",children:y?Object(a.jsx)("span",{className:y,children:y===x.NONE?"Draw":y===t?"You win":"You lose"}):Object(a.jsx)("span",{className:S,children:S===t?"Your turn":"Opponent's turn"})}),Object(a.jsxs)("div",{className:"score",children:[Object(a.jsx)("span",{className:"x",children:A[x.X]}),Object(a.jsx)("span",{children:"-"}),Object(a.jsx)("span",{className:"o",children:A[x.O]})]})]}),Object(a.jsx)(hn,{tiles:l,winner:y,processTurn:I}),y&&Object(a.jsx)("button",{className:"continue",onClick:P,children:"Again"})]})]})}function Sn(){var n=E(),e=n.roomId,t=n.playerId,c=void 0===t?x.X:t,o=function(n,e){var t=Object(r.useState)(null),a=Object(O.a)(t,2),c=a[0],o=a[1],s=Object(r.useState)(""),i=Object(O.a)(s,2),l=i[0],d=i[1];return Object(r.useEffect)((function(){var n=new J.a;return n.on("error",(function(n){console.error("ERROR:",n)})),n.on("open",(function(t){if(d(t),console.debug("Peer Id:",t),e){console.debug("Role: HOST");var a=n.connect(e);o(a),a.on("error",(function(){o(Object(M.a)(Object(M.a)({},a),{},{status:"ERROR"}))})),a.on("close",(function(){o(Object(M.a)(Object(M.a)({},a),{},{status:"CLOSED"}))})),console.debug("Connection established",a)}})),e||(console.debug("Role: CLIENT"),n.on("connection",(function(n){o(n),n.on("error",(function(){o(Object(M.a)(Object(M.a)({},n),{},{status:"ERROR"}))})),n.on("close",(function(){o(Object(M.a)(Object(M.a)({},n),{},{status:"CLOSED"}))})),console.debug("Connection established",n)}))),function(){n.destroy()}}),[n,e]),{connection:c,peerId:l}}(c,e),s=o.connection,i=o.peerId;return Object(a.jsx)(Nn,{type:W.VERSUS,playerId:c,connection:s,peerId:i})}function En(){return Object(a.jsx)(Nn,{type:W.LOCAL,playerId:x.X,connection:null,peerId:""})}function Cn(){var n=Object(i.a)(["\n  padding: ",";\n  gap: ",";\n\n  > * {\n    width: 100%;\n    max-width: 1000px;\n  }\n"]);return Cn=function(){return n},n}var Rn=Object(u.b)(h)(Cn(),b.gap,b.gap);var In=function(){return Object(a.jsx)(l.a,{basename:"/tic-tac-toe",children:Object(a.jsxs)(Rn,{children:[Object(a.jsx)(P,{}),Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{path:"/local",children:Object(a.jsx)(En,{})}),Object(a.jsx)(d.b,{path:"/versus",children:Object(a.jsx)(Sn,{})}),Object(a.jsx)(d.b,{path:"/",children:Object(a.jsx)(I,{})})]}),Object(a.jsx)(V,{})]})})},Tn=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,47)).then((function(e){var t=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,o=e.getTTFB;t(n),a(n),r(n),c(n),o(n)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(In,{})}),document.getElementById("root")),Tn()}},[[46,1,2]]]);
//# sourceMappingURL=main.8fc0c0fd.chunk.js.map